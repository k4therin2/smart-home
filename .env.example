# Smart Home Assistant - Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# LLM Configuration (WP-10.8: home-llm is now the default)
# =============================================================================

# LLM Provider (optional, default: home_llm)
# Options: "home_llm" (default), "openai", "anthropic", "local"
# home_llm = Ollama on colby server (95% cost savings, no API costs!)
# LLM_PROVIDER=home_llm

# Home-LLM Server URL (default: colby via Tailscale)
# HOME_LLM_URL=http://100.75.232.36:11434

# Custom model override (optional)
# Default: llama3 for home_llm, gpt-4o-mini for OpenAI, claude-sonnet-4 for Anthropic
# LLM_MODEL=llama3

# OpenAI API Key (used as fallback when home-llm is unavailable)
# Set this to enable automatic fallback to OpenAI
OPENAI_API_KEY=your_openai_api_key_here

# For local LLMs (Ollama, LM Studio, vLLM, etc.):
# Set LLM_PROVIDER=local and configure these:
# LLM_BASE_URL=http://localhost:11434/v1  # Ollama default
# LLM_MODEL=llama3.2                       # Your local model name
# LLM_API_KEY=not-needed                   # Usually not needed for local

# Home Assistant Configuration (required)
HA_URL=http://localhost:8123
HA_TOKEN=your_home_assistant_long_lived_access_token_here

# Spotify Configuration (required for music playback)
# Create app at: https://developer.spotify.com/dashboard/applications
# Requires Spotify Premium account for playback control
# IMPORTANT: Use 127.0.0.1 (not localhost) - Spotify requires explicit IP for redirect URIs
SPOTIFY_CLIENT_ID=your_spotify_client_id_here
SPOTIFY_CLIENT_SECRET=your_spotify_client_secret_here
SPOTIFY_REDIRECT_URI=http://127.0.0.1:8888/callback

# Optional: NATS for agent chat (defaults to localhost)
NATS_URL=nats://localhost:4222

# Cost Tracking Thresholds (optional, defaults shown)
DAILY_COST_TARGET=2.00
DAILY_COST_ALERT=5.00

# Logging Level (optional: DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Flask Debug Mode (optional, default: false)
# WARNING: NEVER set to true in production - exposes stack traces and debug info
FLASK_DEBUG=false

# Flask Environment (optional, set to 'production' for production)
# When set to 'production', enables secure cookies (requires HTTPS)
FLASK_ENV=development

# Flask Secret Key (required for session security)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
# If not set, a random key is generated at startup (sessions won't persist across restarts)
FLASK_SECRET_KEY=your_secret_key_here

# =============================================================================
# Voice Control Configuration (REQ-016)
# =============================================================================

# Voice Webhook Token (optional - for HA conversation agent authentication)
# If set, HA must include this as Bearer token in Authorization header
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# If not set, voice endpoint requires session authentication
VOICE_WEBHOOK_TOKEN=your_webhook_token_here

# =============================================================================
# HTTPS/TLS Configuration (Phase 2.2)
# =============================================================================

# Enable HTTPS (optional, default: true - will fall back to HTTP if no certs)
# Generate certificates with: python scripts/generate_cert.py
USE_HTTPS=true

# Enable HTTP to HTTPS redirect (optional, default: true)
# When enabled, HTTP requests on port-1 (e.g., 5049) redirect to HTTPS (e.g., 5050)
HTTP_REDIRECT=true

# SSL Certificate Common Name (optional, default: smarthome.local)
SSL_COMMON_NAME=smarthome.local

# SSL Certificate Organization (optional)
SSL_ORGANIZATION=Smart Home Assistant

# =============================================================================
# Security Monitoring Configuration
# =============================================================================

# Slack Webhooks - Four separate channels for different alert types
# Create at: https://api.slack.com/apps -> Create App -> Incoming Webhooks
# Add one webhook per channel, then copy the webhook URLs here

# Security alerts: SSH failures, UFW blocks, sudo failures (#colby-server-security)
SLACK_SECURITY_WEBHOOK=https://hooks.slack.com/services/YOUR/SECURITY/WEBHOOK

# Cost alerts: API cost threshold notifications (#smarthome-costs)
SLACK_COST_WEBHOOK=https://hooks.slack.com/services/YOUR/COST/WEBHOOK

# Health alerts: Service up/down status (#smarthome-health)
SLACK_HEALTH_WEBHOOK=https://hooks.slack.com/services/YOUR/HEALTH/WEBHOOK

# Server health: Weekly reports, memory/disk/load alerts (#colby-server-health)
SLACK_SERVER_HEALTH_WEBHOOK=https://hooks.slack.com/services/YOUR/SERVER_HEALTH/WEBHOOK

# Alert Thresholds (optional, defaults shown)
SSH_FAILED_THRESHOLD=5           # Alert after N failed SSH attempts in 10 min
API_COST_ALERT_THRESHOLD=5.00    # Alert when daily API cost exceeds this

# Monitoring Intervals in seconds (optional, defaults shown)
SSH_CHECK_INTERVAL=60            # Check auth.log every 60 seconds
COST_CHECK_INTERVAL=300          # Check API costs every 5 minutes
SERVICE_CHECK_INTERVAL=60        # Check service health every 60 seconds

# Weekly Report Schedule (optional, defaults shown)
WEEKLY_REPORT_DAY=4              # Day of week (0=Monday, 4=Friday)
WEEKLY_REPORT_HOUR=17            # Hour in 24h format (17 = 5 PM)
